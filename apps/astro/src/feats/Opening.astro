---
import { OpeningLetters } from '@nilswg-site/feat';
import { getI18nTextArray } from '@nilswg/i18n';
import { t } from 'i18next';
import Typewriter from 'typewriter-effect';
import OpeningButton from '@/feats/Opening/OpeningButton';
import { SocialLinks } from '@/components/SocialLinks';

const opening = {
    letters: getI18nTextArray(t, 'home:openings.letters'),
    typewriter: getI18nTextArray(t, 'home:openings.typewriter'),
    learnmore: t('home:openings.learnmore', { defaultValue: 'LEARN MORE' }),
};
---

<section class="opening-bg-image flex h-[calc(100vh-10rem)] flex-col items-center justify-between">
    <div class="container flex h-full w-full flex-row items-center justify-between 2xl:w-3/4">
        <div class="flex w-full justify-center">
            <div>
                <h1 class="tags animate-fadeIn animate-delay-[3s] ml-6">{'<h1>'}</h1>
                <OpeningLetters letters={opening.letters} waitMS={2000} client:load/>
                <h1 class="tags animate-fadeIn animate-delay-[3s] xs:ml-3 ml-6 inline">{'</h1>'}</h1>
                <h1 class="tags animate-fadeIn animate-delay-[3s] ml-6">{'<p>'}</h1>
                <div class="font-orbitron ml-9 text-xs tracking-wide text-gray-400 sm:text-lg md:text-2xl">
                    <div id="typewriter"></div>
                </div>
                <h1 class="tags animate-fadeIn animate-delay-[3s] ml-6">{'</p>'}</h1>
            </div>
        </div>
        <div class="mr-4 hidden sm:block">
            <SocialLinks className="flex flex-col gap-5 px-0 py-2 opacity-60" />
        </div>
    </div>
    <div class="flex justify-center py-6">
        <OpeningButton delayMS={6000} text={opening.learnmore} client:load />
    </div>
    <script defer src="https://unpkg.com/typewriter-effect@latest/dist/core.js"></script>
    <script defer type="module" define:vars={{ opening }}>
        var app = document.getElementById('typewriter');
        new Typewriter(app, { loop: true, delay: 75 })
            .pauseFor(6000)
            .typeString(opening.typewriter[0])
            .pauseFor(1000)
            .deleteAll()
            .typeString(opening.typewriter[1])
            .pauseFor(1000)
            .deleteAll()
            .typeString(opening.typewriter[2])
            .pauseFor(1000)
            .deleteAll()
            .start();
    </script>
</section>
